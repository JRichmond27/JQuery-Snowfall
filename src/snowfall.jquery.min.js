Date.now||(Date.now=function(){return(new Date).getTime()}),function(){"use strict";for(var vendors=["webkit","moz"],i=0;i<vendors.length&&!window.requestAnimationFrame;++i){var vp=vendors[i];window.requestAnimationFrame=window[vp+"RequestAnimationFrame"],window.cancelAnimationFrame=window[vp+"CancelAnimationFrame"]||window[vp+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var lastTime=0;window.requestAnimationFrame=function(callback){var now=Date.now(),nextTime=Math.max(lastTime+16,now);return setTimeout((function(){callback(lastTime=nextTime)}),nextTime-now)},window.cancelAnimationFrame=clearTimeout}}(),function($){$.snowfall=function(element,options){var flakes=[],defaults={flakeCount:35,flakeColor:"#ffffff",flakePosition:"absolute",flakeIndex:999999,minSize:1,maxSize:2,minSpeed:1,maxSpeed:5,round:!1,shadow:!1,collection:!1,collectionHeight:40,deviceorientation:!1},options=$.extend(defaults,options),random=function random(min,max){return Math.round(min+Math.random()*(max-min))};function Flake(_x,_y,_size,_speed){this.x=_x,this.y=_y,this.size=_size,this.speed=_speed,this.step=0,this.stepSize=random(1,10)/100,options.collection&&(this.target=canvasCollection[random(0,canvasCollection.length-1)]);var flakeMarkup=null;options.image?(flakeMarkup=document.createElement("img")).src=options.image:(flakeMarkup=document.createElement("div"),$(flakeMarkup).css({background:options.flakeColor})),$(flakeMarkup).attr({class:"snowfall-flakes"}).css({width:this.size,height:this.size,position:options.flakePosition,top:this.y,left:this.x,fontSize:0,zIndex:options.flakeIndex}),$(element).get(0).tagName===$(document).get(0).tagName?($("body").append($(flakeMarkup)),element=$("body")):$(element).append($(flakeMarkup)),this.element=flakeMarkup,this.update=function(){if(this.y+=this.speed,this.y>elHeight-(this.size+6)&&this.reset(),this.element.style.top=this.y+"px",this.element.style.left=this.x+"px",this.step+=this.stepSize,this.x+=!1===doRatio?Math.cos(this.step):doRatio+Math.cos(this.step),options.collection&&this.target&&this.x>this.target.x&&this.x<this.target.width+this.target.x&&this.y>this.target.y&&this.y<this.target.height+this.target.y){var ctx=this.target.element.getContext("2d"),curX=this.x-this.target.x,curY=this.y-this.target.y,colData=this.target.colData;if(void 0!==colData[parseInt(curX)][parseInt(curY+this.speed+this.size)]||curY+this.speed+this.size>this.target.height)if(curY+this.speed+this.size>this.target.height){for(;curY+this.speed+this.size>this.target.height&&this.speed>0;)this.speed*=.5;ctx.beginPath(),ctx.fillStyle=defaults.flakeColor,null==colData[parseInt(curX)][parseInt(curY+this.speed+this.size)]?(colData[parseInt(curX)][parseInt(curY+this.speed+this.size)]=1,ctx.ellipse(curX+this.size/2.5,curY+this.speed+1.25*this.size,this.size/1.25,this.size/2.75,0,0,2*Math.PI)):(colData[parseInt(curX)][parseInt(curY+this.speed)]=1,ctx.ellipse(curX+this.size/2.5,curY+this.speed+1.75*this.size,this.size/1.25,this.size/2.75,0,0,2*Math.PI)),ctx.fill(),this.reset()}else this.speed=1,this.stepSize=0,parseInt(curX)+1<this.target.width&&null==colData[parseInt(curX)+1][parseInt(curY)+1]?this.x++:parseInt(curX)-1>0&&null==colData[parseInt(curX)-1][parseInt(curY)+1]?this.x--:(ctx.beginPath(),ctx.fillStyle=defaults.flakeColor,ctx.ellipse(curX+this.size/2.5,curY+1.25*this.size,this.size/1.25,this.size/2.75,0,0,2*Math.PI),ctx.fill(),colData[parseInt(curX)][parseInt(curY)]=1,this.reset())}(this.x+this.size>elWidth-widthOffset||this.x<widthOffset)&&this.reset()},this.reset=function(){this.y=0,this.x=random(widthOffset,elWidth-widthOffset),this.stepSize=random(1,10)/100,this.size=random(100*options.minSize,100*options.maxSize)/100,this.element.style.width=this.size+"px",this.element.style.height=this.size+"px",this.speed=random(options.minSpeed,options.maxSpeed)}}$(element).data("snowfall",this);var i=0,elHeight=$(element).height(),elWidth=$(element).width(),widthOffset=0,collectionPadding=10,snowTimeout=0,snowAnimReq=0;if(!1!==options.collection){var testElem=document.createElement("canvas");if(testElem.getContext&&testElem.getContext("2d"))for(var canvasCollection=[],collectionHeight=options.collectionHeight,elements=$(options.collection),i=0;i<elements.length;i++){var $parent=$(elements[i]),parentOffset=$parent.offset(),parentWidth=$parent.innerWidth(),canvasWidth=Math.round(parentWidth-20),$canvas=$("<canvas/>",{class:"snowfall-canvas"}),collisionData=[];$("body").append($canvas),$canvas.css({"pointer-events":"none",position:options.flakePosition,left:Math.round(parentOffset.left+10)+"px",top:Math.round(parentOffset.top-collectionHeight)+"px","z-index":"1"}).prop({width:canvasWidth,height:collectionHeight});for(var w=0;w<canvasWidth;w++)collisionData[w]=[];canvasCollection.push({element:$canvas.get(0),parent:$parent,x:Math.round(parentOffset.left+10),y:Math.round(parentOffset.top-collectionHeight),width:canvasWidth,height:collectionHeight,colData:collisionData})}else options.collection=!1}$(element).get(0).tagName===$(document).get(0).tagName&&(widthOffset=25);var resizeTimeout=!1,resizeDelay=250;function reinitCollection(){for(var i=0;i<canvasCollection.length;i++){var canvasData=canvasCollection[i],$parent=canvasData.parent,parentOffset=$parent.offset(),parentWidth=$parent.innerWidth(),canvasWidth=Math.round(parentWidth-20),ctx,collisionData=[];canvasData.element.getContext("2d").clearRect(0,0,canvasData.width,canvasData.height),$(canvasData.element).css({left:Math.round(parentOffset.left+10)+"px",top:Math.round(parentOffset.top-collectionHeight)+"px"}).prop({width:canvasWidth});for(var w=0;w<canvasWidth;w++)collisionData[w]=[];canvasData.x=Math.round(parentOffset.left+10),canvasData.y=Math.round(parentOffset.top-collectionHeight),canvasData.width=canvasWidth,canvasData.colData=collisionData}}for($(window).bind("resize",(function(){elHeight=$(element)[0].clientHeight,elWidth=$(element)[0].offsetWidth,clearTimeout(resizeTimeout),resizeTimeout=setTimeout(reinitCollection,250)})),i=0;i<options.flakeCount;i+=1)flakes.push(new Flake(random(widthOffset,elWidth-widthOffset),random(0,elHeight),random(100*options.minSize,100*options.maxSize)/100,random(options.minSpeed,options.maxSpeed)));options.round&&$(".snowfall-flakes").css({"-moz-border-radius":options.maxSize,"-webkit-border-radius":options.maxSize,"border-radius":options.maxSize}),options.shadow&&$(".snowfall-flakes").css({"-moz-box-shadow":"1px 1px 1px #555","-webkit-box-shadow":"1px 1px 1px #555","box-shadow":"1px 1px 1px #555"});var doRatio=!1;function snow(){for(i=0;i<flakes.length;i+=1)flakes[i].update();snowTimeout=setTimeout((function(){snowAnimReq=requestAnimationFrame((function(){snow()}))}),30)}options.deviceorientation&&$(window).bind("deviceorientation",(function(event){doRatio=.1*event.originalEvent.gamma})),snow(),this.clear=function(){$(".snowfall-canvas").remove(),$(element).children(".snowfall-flakes").remove(),clearTimeout(snowTimeout),cancelAnimationFrame(snowAnimReq)}},$.fn.snowfall=function(options){return"object"==typeof options||null==options?this.each((function(i){new $.snowfall(this,options)})):"string"==typeof options?this.each((function(i){var snow=$(this).data("snowfall");snow&&snow.clear()})):void 0}}(jQuery),$(document).ready((function(){var vimeoPlayer;$(document).snowfall({image:"/themes/thewellv9/assets/images/snowflake.png",collection:"#zone-hero .tagline, #zone-hero .btn-default, section.featured-banner, section.ministry-schedule, section.ministry-schedule .btn-primary",round:!0,minSize:6,maxSize:15,flakeCount:140,minSpeed:2,maxSpeed:5}),setTimeout((function(){$("body").addClass("Snowing")}),1e3),$(".vimeoplayer iframe").data("player").on("play",(function(){$(document).snowfall("clear"),$("body").removeClass("Snowing"),console.log("Stop Snow")}))}));
//# sourceMappingURL=snowfall.jquery.min.js.map